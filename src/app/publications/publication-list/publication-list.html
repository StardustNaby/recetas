<div class="publication-list">
  <h2>Publicaciones</h2>

  <div class="publication-grid" *ngIf="publications.length > 0; else noPublications">
    <mat-card *ngFor="let pub of publications" class="publication-card">
      <mat-card-header>
        <mat-card-title>{{ pub.titulo || 'Publicación sin título' }}</mat-card-title>
      </mat-card-header>

      <div class="publication-photos" *ngIf="pub.fotos && pub.fotos.length > 0">
        <img *ngFor="let foto of pub.fotos.slice(0, 3)" [src]="foto" [alt]="pub.titulo || 'Publicación'" />
      </div>

      <mat-card-content>
        <p>{{ pub.contenido }}</p>
        <div class="publication-meta">
          <span class="publication-type" [class]="'type-' + pub.tipo">
            {{ pub.tipo === 'receta_referenciada' ? 'Referencia a Receta' : 'Opinión' }}
          </span>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button color="primary" (click)="viewPublication(pub.id_publicacion)">
          Ver publicación
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <ng-template #noPublications>
    <p>No hay publicaciones disponibles.</p>
  </ng-template>
</div>
